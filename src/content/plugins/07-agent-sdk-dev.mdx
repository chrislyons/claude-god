---
title: "Agent Development"
section: 7
description: "Validate and build custom agents with agent-sdk-dev"
---

import Callout from '../../components/Callout.astro';

## Agent SDK Development Plugin

Tools for validating existing agents and building new ones following Agent SDK best practices.

---

## Why This Matters

You already have custom agents in your repos:
- `data-pipeline/.claude/agents/`
- `content-system/.claude/agents/`
- `audio-lib/.claude/agents/`
- `dict-app/.claude/agents/`
- `knowledge-base/.claude/agents/`
- `analysis-tool/.claude/agents/`

This plugin ensures they follow best practices and helps you build new ones correctly.

---

## Commands

**/new-sdk-app** - Interactive SDK project setup

```bash
/new-sdk-app
```

Guides you through creating a new Agent SDK application:
1. Choose language (Python or TypeScript)
2. Select project template
3. Configure dependencies
4. Set up directory structure
5. Generate boilerplate code

**When to use:**
- Building standalone agent applications
- Creating complex multi-agent systems
- Developing agents for distribution

<Callout type="info">
**SDK vs CLI Agents:** See the [Agent SDK guide](/agent-sdk) for the difference between CLI agents (in `.claude/agents/`) and SDK applications (standalone programs).
</Callout>

---

## Validators

### agent-sdk-verifier-py

Validates Python Agent SDK applications.

**What it checks:**
- Correct import patterns
- Proper async/await usage
- Tool registration
- Error handling
- API usage patterns
- Type hints

**Example validation:**

```bash
cd ~/projects/data-pipeline/.claude/agents/data-analyzer
# If this is a Python SDK agent:
# The plugin validates it automatically
```

**Common issues caught:**
```python
# ❌ Missing await
result = agent.run_tool("search")

# ✅ Correct
result = await agent.run_tool("search")
```

```python
# ❌ Wrong import
from claude import Agent

# ✅ Correct
from claude_sdk import Agent
```

### agent-sdk-verifier-ts

Validates TypeScript Agent SDK applications.

**What it checks:**
- TypeScript configuration
- Proper async patterns
- Tool type definitions
- Error boundaries
- Module exports

**Example validation:**

```typescript
// ❌ Missing types
async function runAgent(input) {
  return await agent.process(input);
}

// ✅ Correct
async function runAgent(input: string): Promise<AgentResult> {
  return await agent.process(input);
}
```

---

## Validating Your Existing Agents

### Workflow

```bash
# Navigate to each repo
cd ~/projects/data-pipeline

# If you have Python agents in .claude/agents/:
# The validator runs automatically when you work with them

# Check for issues:
ls .claude/agents/
# agent-sdk-dev will flag any non-compliant agents
```

### Common Issues & Fixes

**Issue: Agent doesn't follow SDK patterns**

```bash
# Old pattern (CLI-only agent)
{
  "name": "my-agent",
  "description": "Does stuff",
  "agent_type": "code-reviewer"
}

# SDK pattern (if converting to SDK)
# Needs proper Python/TS entry point with Agent SDK imports
```

**Issue: Missing error handling**

```python
# ❌ No error handling
def process_data(data):
    result = expensive_operation(data)
    return result

# ✅ Proper error handling
async def process_data(data: Dict) -> Result:
    try:
        result = await expensive_operation(data)
        return Result(success=True, data=result)
    except Exception as e:
        logger.error(f"Processing failed: {e}")
        return Result(success=False, error=str(e))
```

**Issue: Synchronous instead of async**

```python
# ❌ Synchronous (blocks)
def search_codebase(query):
    return tool.search(query)

# ✅ Asynchronous (non-blocking)
async def search_codebase(query: str) -> SearchResults:
    return await tool.search(query)
```

<Callout type="success">
**Auto-Fix:** The validator often suggests fixes automatically. Follow the recommendations to bring agents up to best practices.
</Callout>

---

## Building New Agents

### Use Case Examples from Your Repos

**data-pipeline: Data Pipeline Validator**
```bash
/new-sdk-app

Language: Python
Purpose: Validate data pipelines before processing
Tools: File reading, schema validation, data quality checks
```

**content-system: Content Validator**
```bash
/new-sdk-app

Language: TypeScript
Purpose: Analyze content structure and metadata
Tools: File system, JSON parsing, content extraction
```

**audio-lib: Audio Quality Checker**
```bash
/new-sdk-app

Language: Python
Purpose: Verify audio files meet quality standards
Tools: Audio analysis, FFmpeg integration, report generation
```

**dict-app: Dictionary Data Validator**
```bash
/new-sdk-app

Language: Rust (or TypeScript)
Purpose: Validate database data integrity
Tools: Database queries, schema checks, consistency validation
```

---

## Agent SDK Best Practices

### 1. Always Use Async/Await

```python
# SDK agents should be async by default
async def main():
    agent = Agent(name="my-agent")
    result = await agent.run()
    return result
```

### 2. Proper Error Handling

```python
from typing import Result, Error

async def process(input: str) -> Result[str, Error]:
    try:
        output = await heavy_processing(input)
        return Result.ok(output)
    except ProcessingError as e:
        return Result.err(Error(str(e)))
```

### 3. Type Hints (Python) / Types (TypeScript)

```python
# ✅ Python with types
async def search(query: str, limit: int = 10) -> List[SearchResult]:
    ...

# ✅ TypeScript with types
async function search(query: string, limit: number = 10): Promise<SearchResult[]> {
    ...
}
```

### 4. Tool Registration

```python
from claude_sdk import Agent, Tool

@Tool(name="search", description="Search codebase")
async def search_tool(query: str) -> str:
    # Implementation
    pass

agent = Agent(tools=[search_tool])
```

---

## When to Use CLI Agents vs SDK Apps

**CLI Agents** (`.claude/agents/*.json` or `.md`):
- Simple, declarative agents
- Workflow automation
- Quick helpers for specific repos
- No programming needed

**SDK Applications** (built with `/new-sdk-app`):
- Complex multi-step logic
- External API integrations
- Advanced error handling
- Reusable across projects
- Requires programming

<Callout type="info">
**Most of your repos use CLI agents** - simple JSON/MD files in `.claude/agents/`. SDK apps are for more complex needs. See the [Agent SDK guide](/agent-sdk) for details.
</Callout>

---

## Validation Workflow Summary

```bash
# 1. Install plugin (already done)
claude plugin install agent-sdk-dev

# 2. Work with your agents
cd ~/projects/data-pipeline
# Edit agents in .claude/agents/

# 3. Validation happens automatically
# Any issues flagged with suggestions

# 4. Fix issues
# Follow validator recommendations

# 5. Test agent
# Verify it works as expected

# 6. Repeat for other repos
cd ~/projects/content-system
cd ~/projects/audio-lib
# etc.
```

---

## Building vs Validating

**Validating existing agents:**
- Automatic when working with `.claude/agents/`
- Flags issues, suggests fixes
- No command needed

**Building new SDK apps:**
- Use `/new-sdk-app`
- Interactive setup
- Generates compliant boilerplate

**Most users:** Validation is what you'll use most. Building SDK apps is for advanced scenarios.

<Callout type="success">
**Pro Tip:** Start by validating your existing agents. If the validator suggests converting to SDK app (for complexity reasons), then use `/new-sdk-app`.
</Callout>
