---
title: "Essential Features"
section: 3
description: "Built-in agents, skills system, and core functionality"
---

import Callout from '../../components/Callout.astro';

## Built-in Agents

Claude Code ships with three powerful agents that handle different types of tasks.

### Plan Agent

**Purpose:** Research and planning before implementation

**Model:** Sonnet
**Tools:** Read, Glob, Grep, Bash (read-only)

**When to use:**
- Before implementing complex features
- When you need to understand codebase structure
- Planning multi-file changes
- Researching existing patterns

**How it works:**
1. Enter plan mode with Shift+Tab twice or via `/plan` flag
2. Plan agent explores your codebase
3. Presents implementation plan for approval
4. After approval, switches to implementation

**Example:**

```bash
# In the REPL, press Shift+Tab twice to enter plan mode
claude

# Or use the --plan flag
claude --plan "Add user authentication"
```

The Plan agent will research your codebase, understand existing patterns, and present a detailed implementation plan before writing any code.

<Callout type="success">
**Best Practice:** Use plan mode for any non-trivial feature. Getting alignment upfront prevents wasted effort.
</Callout>

### Explore Agent

**Purpose:** Fast, read-only codebase exploration

**Model:** Haiku (optimized for speed)
**Tools:** Glob, Grep, Read, Bash (read-only: ls, git status, git log, git diff, find, cat, head, tail)

**Thoroughness levels:**
- **Quick** - Basic searches
- **Medium** - Moderate exploration
- **Very thorough** - Comprehensive analysis across multiple locations

**When to use:**
- Finding files by patterns
- Searching code for keywords
- Understanding how specific features work
- Quick codebase questions without modifications

**Example:**

```bash
# Claude automatically uses Explore agent for read-only tasks
claude

# In conversation:
> "Find all API endpoints in the codebase"
> "How does authentication work?"
> "Where are the database models defined?"
```

The Explore agent handles these searches efficiently without full context loading.

<Callout type="info">
**Performance:** Explore agent uses Haiku for fast responses and lower costs on research tasks.
</Callout>

### General-Purpose Agent

**Purpose:** Complex multi-step tasks requiring both research and modification

**Model:** Sonnet
**Tools:** All tools available (Read, Write, Edit, Bash, Grep, Glob, etc.)

**When to use:**
- Complex refactoring tasks
- Multi-step implementations
- Tasks requiring research + code changes
- Automated workflows

**Example:**

```bash
claude "Search for all TODO comments and create GitHub issues for them"
```

The general-purpose agent can search the codebase (research) and create issues (action) in a single workflow.

---

## Skills System

Skills are auto-invoked capabilities that Claude uses when requests match their descriptions.

### Creating Custom Skills

**Location:** `.claude/skills/<skill-name>/SKILL.md`

**Structure:**

```markdown
---
name: skill-name
description: Brief description of when to use this skill (max 1024 chars)
allowed-tools: Read, Edit, Bash
model: sonnet
---

# Skill Instructions

Detailed instructions for what Claude should do when this skill is invoked...
```

### Real Skills Examples

**Code Review Skill:**

```markdown
# .claude/skills/code-review/SKILL.md
---
name: code-review
description: Reviews code for quality, security, performance, and maintainability. Use after writing or modifying significant code.
allowed-tools: Read, Grep, Glob
model: sonnet
---

# Code Review Process

You are an expert code reviewer. When invoked:

1. **Security Analysis**
   - Check for OWASP top 10 vulnerabilities
   - Review input validation and sanitization
   - Verify authentication and authorization

2. **Code Quality**
   - Assess readability and maintainability
   - Check for code smells and anti-patterns
   - Verify adherence to repository conventions

3. **Performance**
   - Identify potential bottlenecks
   - Review algorithm complexity
   - Check for unnecessary operations

4. **Testing**
   - Assess test coverage
   - Review test quality
   - Suggest missing test cases

Provide specific, actionable feedback with file paths and line numbers.
```

**Commit Message Generation Skill:**

```markdown
# .claude/skills/generate-commit-message/SKILL.md
---
name: generate-commit-message
description: Generates conventional commit messages by examining git diffs. Use when user asks to create a commit or commit message.
allowed-tools: Bash, Read
---

# Commit Message Generation

When invoked:

1. Run `git diff --staged` to see changes
2. Run `git log -5 --oneline` to understand commit message style
3. Generate a commit message following conventions:
   - Type: feat, fix, docs, refactor, test, chore
   - Scope (optional): Component or area affected
   - Description: Concise summary (50 chars)
   - Body (optional): Detailed explanation

Format: type(scope): description

Examples:
- feat(auth): add JWT token refresh mechanism
- fix(api): handle rate limit errors gracefully
- docs(readme): update installation instructions
```

**PDF Processing Skill:**

```markdown
# .claude/skills/pdf-processing/SKILL.md
---
name: pdf-processing
description: Extract text from PDFs, fill forms, merge PDFs. Use when user mentions PDF operations.
allowed-tools: Bash, Read, Write
---

# PDF Processing

Available operations:

1. **Extract Text**: Use `pdftotext` or `pypdf` to extract content
2. **Fill Forms**: Use `pdftk` to populate form fields
3. **Merge PDFs**: Combine multiple PDFs into one
4. **Split PDFs**: Extract pages from a PDF

Dependencies: Ensure `pdftotext`, `pdftk`, or `pypdf2` is installed.

Scripts are available in `scripts/` subdirectory.
```

<Callout type="success">
**Progressive Disclosure:** Keep SKILL.md focused (under 500 lines). Put detailed documentation in separate `.md` files and scripts in `scripts/` subdirectory. Claude loads them on demand.
</Callout>

### Skill Locations and Scopes

| Scope      | Location                | Availability               |
|------------|-------------------------|----------------------------|
| User       | `~/.claude/skills/`     | All projects               |
| Project    | `.claude/skills/`       | Team-shared (in git)       |
| Plugin     | `skills/` in plugin     | Anyone with plugin installed |

---

## Language Server Integration (LSP)

LSP plugins provide code intelligence: diagnostics, navigation, hover info, type checking.

### Official LSP Plugins

**Install from marketplace:**

```bash
claude
/plugin install pyright-lsp@marketplace
/plugin install typescript-lsp@marketplace
/plugin install rust-lsp@marketplace
```

**What you get:**
- Type errors and warnings highlighted
- Code navigation (go to definition, find references)
- Hover tooltips with type information
- Auto-completion suggestions
- Diagnostic errors in real-time

**Supported languages:**
- **Python** - `pyright-lsp` (type checking via Pyright)
- **TypeScript/JavaScript** - `typescript-lsp` (TS language server)
- **Rust** - `rust-lsp` (rust-analyzer integration)

<Callout type="info">
**Enhanced Assistance:** With LSP plugins active, Claude can see type errors, navigate code more accurately, and provide better suggestions.
</Callout>

---

## MCP Server Integration

MCP (Model Context Protocol) servers expose external tools and data to Claude.

### Popular MCP Servers

**GitHub MCP Server:**
- Create, read, update issues
- Manage pull requests
- Search repositories
- View commit history

**Sentry MCP Server:**
- Query error logs
- Analyze stack traces
- Track error trends
- Debug production issues

**PostgreSQL MCP Server:**
- Query databases
- Explore schemas
- Analyze query performance
- Generate migrations

### Setting Up MCP Servers

**Configuration in `.mcp.json`:**

```json
{
  "mcpServers": {
    "github": {
      "command": "node",
      "args": ["/path/to/github-mcp-server/index.js"],
      "env": {
        "GITHUB_TOKEN": "${GITHUB_TOKEN}"
      }
    },
    "sentry": {
      "command": "docker",
      "args": ["run", "sentry-mcp-server"],
      "env": {
        "SENTRY_DSN": "${SENTRY_DSN}"
      }
    }
  }
}
```

**Managing connections:**

```bash
# In the REPL
/mcp list            # Show available servers
/mcp connect github  # Connect to server
/mcp disconnect github  # Disconnect
```

**Using MCP tools:**

Once connected, Claude can use MCP server tools automatically:

```bash
# Example: Create a GitHub issue
"Create a GitHub issue titled 'Fix auth bug' with description from recent error logs"

# Claude uses GitHub MCP server to create the issue
```

<Callout type="success">
**Integration Power:** MCP servers let Claude interact with external systems directly - no manual API calls needed.
</Callout>

---

## Custom Commands

Create slash commands for common workflows.

### Creating a Command

**File:** `.claude/commands/test.md`

```markdown
---
description: Run project test suite
allowed-tools: Bash
model: sonnet
---

Run the complete test suite and report results:

!npm test

Analyze the output and report:
- Total tests run
- Passed/failed counts
- Any error messages
- Suggested fixes for failures
```

**Usage:**

```bash
claude
/test  # Runs your custom command
```

### Command with Arguments

**File:** `.claude/commands/commit.md`

```markdown
---
description: Create a commit with a custom message
argument-hint: "commit message"
allowed-tools: Bash
---

Create a git commit with message: "$ARGUMENTS"

!git add .
!git commit -m "$ARGUMENTS"
!git status
```

**Usage:**

```bash
/commit "feat: add user authentication"
```

### Command with File References

**File:** `.claude/commands/review.md`

```markdown
---
description: Review a specific file
argument-hint: "file path"
allowed-tools: Read, Grep
---

Review the file at: @$ARGUMENTS

Analyze:
- Code quality
- Security issues
- Performance concerns
- Suggested improvements
```

**Usage:**

```bash
/review src/auth/login.ts
```

<Callout type="info">
**Command Namespacing:** Put commands in subdirectories for organization: `.claude/commands/backend/deploy.md` becomes `/deploy (project:backend)`
</Callout>

---

## Hooks System

Hooks let you intercept and modify Claude's behavior at specific lifecycle events.

### Hook Events

**Available events:**
- **PreToolUse** - Before tool execution (can block or modify)
- **PostToolUse** - After tool completes
- **PermissionRequest** - When permission is needed
- **UserPromptSubmit** - Before processing user input
- **Stop** - When Claude finishes responding
- **SubagentStop** - When subagent completes
- **SessionStart** - At session beginning
- **SessionEnd** - When session ends
- **PreCompact** - Before context compaction

### Example Hook: Security Validation

**File:** `.claude/hooks/hooks.json`

```json
{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash(git push:*)",
        "hooks": [
          {
            "type": "command",
            "command": "bash -c 'git diff --name-only HEAD origin/main | grep -q \".env\" && exit 2 || exit 0'",
            "timeout": 5
          }
        ]
      }
    ]
  }
}
```

This hook blocks `git push` if `.env` files are in the diff (exit code 2 = block).

### Example Hook: Auto-Documentation

**File:** `.claude/hooks/hooks.json`

```json
{
  "hooks": {
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Review the conversation. If significant work was completed (features, bug fixes, refactoring), should documentation be updated? Respond with JSON: {\"continue\": true/false, \"reason\": \"explanation\", \"systemMessage\": \"reminder for Claude\"}",
            "timeout": 30
          }
        ]
      }
    ]
  }
}
```

This hook prompts Claude to consider documentation after completing work.

<Callout type="warning">
**Prompt-Based Hooks:** New feature that uses LLM evaluation for intelligent hook decisions. Requires JSON response schema.
</Callout>

---

## When to Use Each Feature

| Feature | When to Use |
|---------|-------------|
| **Plan Agent** | Complex features, multi-file changes, need alignment |
| **Explore Agent** | Fast searches, understanding code, read-only research |
| **General-Purpose Agent** | Complex refactoring, multi-step workflows |
| **Skills** | Recurring patterns, auto-invoked workflows, team consistency |
| **LSP Plugins** | Language-specific projects needing type checking and intelligence |
| **MCP Servers** | External integrations (GitHub, databases, error tracking) |
| **Custom Commands** | Frequent workflows, team-specific operations |
| **Hooks** | Enforcement, security checks, auto-documentation, notifications |

All these features work together to create a powerful, customizable development environment!
